# ๐ง ุญู ูุดููุฉ ุนุฏู ุธููุฑ ุงูุจุฑุงูุฌ ูุงูุฃูุธูุฉ ุงูุบุฐุงุฆูุฉ

## ๐จ **ุงููุดููุฉ:**

ุนูุฏ ุฅุถุงูุฉ ูุดุชุฑู ูุน ุจุฑุงูุฌ ุชูุฑูู ูุฃูุธูุฉ ุบุฐุงุฆูุฉุ ูุง ุชุธูุฑ ูู ุตูุญุฉ ุชูุงุตูู ุงููุดุชุฑู. ุจุฏูุงู ูู ุฐูู ุชุธูุฑ:

```
ูุง ุชูุฌุฏ ุจุฑุงูุฌ ุชูุฑูู
ูู ูุชู ุฅุถุงูุฉ ุฃู ุจุฑุงูุฌ ุชูุฑูู ููุฐุง ุงููุดุชุฑู

ูุง ุชูุฌุฏ ุฃูุธูุฉ ุบุฐุงุฆูุฉ
ูู ูุชู ุฅุถุงูุฉ ุฃู ุฃูุธูุฉ ุบุฐุงุฆูุฉ ููุฐุง ุงููุดุชุฑู
```

## ๐ **ุงูุณุจุจ ุงูุฃุณุงุณู:**

**ุฌุฏุงูู ุงููุฌููุนุงุช ุบูุฑ ููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**

- `groups` - ุฌุฏูู ุงููุฌููุนุงุช
- `group_items` - ุฌุฏูู ุนูุงุตุฑ ุงููุฌููุนุงุช

ุจุฏูู ูุฐู ุงูุฌุฏุงููุ ูุง ูููู ุญูุธ ุฃู ุฌูุจ ุงูุจุฑุงูุฌ ูุงูุฃูุธูุฉ ุงููุฑุชุจุทุฉ ุจุงููุดุชุฑููู.

---

## โ **ุงูุญู ุงููุงูู (3 ุฎุทูุงุช):**

### **ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุฌุฏุงูู ุงููุฌููุนุงุช ูู Supabase**

1. **ุงุฐูุจ ุฅูู Supabase Dashboard:**

   - [https://supabase.com](https://supabase.com)
   - ุงุฎุชุฑ ูุดุฑูุนู: `nfccwjrneviidwljaeoq`
   - ุงุฐูุจ ุฅูู **SQL Editor**

2. **ุงูุณุฎ ูุงูุตู ุงูุณูุฑูุจุช:**

   ```sql
   -- ุงูุณุฎ ูุญุชูู ููู check-groups-tables.sql ูุงููุงู
   -- ุฃู ุงุณุชุฎุฏู ูุฐุง ุงูุณูุฑูุจุช ุงููุฎุชุตุฑ:

   -- ุฅูุดุงุก ุฌุฏูู ุงููุฌููุนุงุช
   CREATE TABLE IF NOT EXISTS groups (
       id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
       subscriber_id UUID NOT NULL REFERENCES subscribers(id) ON DELETE CASCADE,
       type VARCHAR(10) NOT NULL CHECK (type IN ('course', 'diet')),
       title VARCHAR(255),
       created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
       updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
   );

   -- ุฅูุดุงุก ุฌุฏูู ุนูุงุตุฑ ุงููุฌููุนุงุช
   CREATE TABLE IF NOT EXISTS group_items (
       id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
       group_id UUID NOT NULL REFERENCES groups(id) ON DELETE CASCADE,
       item_id UUID NOT NULL,
       created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
   );

   -- ุฅูุดุงุก ููุงุฑุณ
   CREATE INDEX IF NOT EXISTS idx_groups_subscriber_id ON groups(subscriber_id);
   CREATE INDEX IF NOT EXISTS idx_groups_type ON groups(type);
   CREATE INDEX IF NOT EXISTS idx_group_items_group_id ON group_items(group_id);

   SELECT 'ุชู ุฅูุดุงุก ุฌุฏุงูู ุงููุฌููุนุงุช ุจูุฌุงุญ! โ' as result;
   ```

3. **ุงุถุบุท "Run"**

### **ุงูุฎุทูุฉ 2: ุชุดุบูู ุงุฎุชุจุงุฑ ุงูุชุญูู**

1. **ุดุบู ุงูุชุทุจูู:**

   ```bash
   npm run dev
   ```

2. **ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช:**

   - ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
   - ุณุชุฌุฏ ูููู "ุงุฎุชุจุงุฑ ูุธุงู ุงููุฌููุนุงุช"

3. **ุงููุฑ "ุชุดุบูู ุงุฎุชุจุงุฑ ุดุงูู":**

   - ุณูููู ุจุฅูุดุงุก ูุดุชุฑู ุชุฌุฑูุจู
   - ุฅุถุงูุฉ ุจุฑุงูุฌ ุชูุฑูู ูุฃูุธูุฉ ุบุฐุงุฆูุฉ
   - ุงูุชุญูู ูู ุธููุฑูุง ุจุดูู ุตุญูุญ
   - ุญุฐู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ

### **ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ูู ุงูุชุทุจูู ุงูุญูููู**

1. **ุฃุถู ูุดุชุฑู ุฌุฏูุฏ:**

   - ุงุฐูุจ ุฅูู "ุฅุถุงูุฉ ูุดุชุฑู"
   - ุงููุฃ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ
   - **ุฃุถู ูุฌููุนุฉ ุชูุงุฑูู** ูุงุฎุชุฑ ุจุนุถ ุงูุชูุงุฑูู
   - **ุฃุถู ูุธุงู ุบุฐุงุฆู** ูุงุฎ๏ฟฝ๏ฟฝุฑ ุจุนุถ ุงูุนูุงุตุฑ
   - ุงุญูุธ

2. **ุชุญูู ูู ุงูุชูุงุตูู:**

   - ุงุฐูุจ ุฅูู ุตูุญุฉ ุชูุงุตูู ุงููุดุชุฑู
   - ูุฌุจ ุฃู ุชุธูุฑ ุงูุจุฑุงูุฌ ูุงูุฃูุธูุฉ ุจุดูู ุฌููู ูููุธู

---

## ๐งช **ููููุฉ ุงูุชุญูู ูู ูุฌุงุญ ุงูุญู:**

### **1. ูุญุต ุงูุฌุฏุงูู ูู Supabase:**

```sql
-- ุงูุชุญูู ูู ูุฌูุฏ ุงูุฌุฏุงูู
SELECT table_name
FROM information_schema.tables
WHERE table_schema = 'public'
    AND table_name IN ('groups', 'group_items')
ORDER BY table_name;

-- ูุญุต ุงูุจูุงูุงุช
SELECT
    'groups' as table_name, COUNT(*) as count FROM groups
UNION ALL
SELECT 'group_items', COUNT(*) FROM group_items;
```

### **2. ูุญุต Console ูู ุงููุชุตูุญ:**

ุงูุชุญ Developer Tools (F12) ูุงุจุญุซ ุนู:

```
โ ุชู ุฌูุจ X ูุฌููุนุฉ
๐ ูุฌููุนุฉ 1: { type: 'course', title: '...', items: 2 }
๐ ุชู ุฅูุดุงุก ุงููุดุชุฑู ูุน 1 ูุฌููุนุฉ ููุฑุณุงุช ู 1 ูุฌููุนุฉ ุฃูุธูุฉ ุบุฐุงุฆูุฉ
```

### **3. ุงุฎุชุจุงุฑ ุงุฎุชุจุงุฑ ุงููุธุงู:**

ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุชุ ูุฌุจ ุฃู ูุธูุฑ:

```
โ ูุฌุญ ุงูุงุฎุชุจุงุฑ
ุชู ุงุฎุชุจุงุฑ ุงููุฌููุนุงุช ุจูุฌุงุญ. ุงููุดุชุฑู ูุงู ูู 2 ูุฌููุนุฉ.
```

---

## ๐ **ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูุญููููุง:**

### **ุฎุทุฃ: "relation 'groups' does not exist"**

**ุงูุณุจุจ:** ุฌุฏูู ุงููุฌููุนุงุช ุบูุฑ ููุฌูุฏ

**ุงูุญู:**

```sql
-- ุชุดุบูู ูู Supabase SQL Editor
CREATE TABLE groups (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    subscriber_id UUID NOT NULL REFERENCES subscribers(id) ON DELETE CASCADE,
    type VARCHAR(10) NOT NULL CHECK (type IN ('course', 'diet')),
    title VARCHAR(255),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### **ุฎุทุฃ: "foreign key constraint fails"**

**ุงูุณุจุจ:** ูุญุงููุฉ ุฑุจุท ูุฌููุนุฉ ุจูุดุชุฑู ุบูุฑ ููุฌูุฏ

**ุงูุญู:**

```sql
-- ุงูุชุญูู ูู ุงููุดุชุฑููู
SELECT id, name FROM subscribers LIMIT 5;

-- ุงูุชูุธูู ุฅุฐุง ูุฒู ุงูุฃูุฑ
DELETE FROM groups WHERE subscriber_id NOT IN (SELECT id FROM subscribers);
```

### **ุฎุทุฃ: "ุชู ุฅูุดุงุก 0 ูุฌููุนุฉ"**

**ุงูุณุจุจ:** ุงูุจูุงูุงุช ูุง ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุญู:**

1. ุชุญูู ูู Console ููุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ูุฌูุฏ ููุฑุณุงุช ูุฃูุธูุฉ ุบุฐุงุฆูุฉ:

```sql
SELECT COUNT(*) FROM course_points;
SELECT COUNT(*) FROM diet_items;
```

3. ุฅุฐุง ูุงูุช ูุงุฑุบุฉุ ุฃุถู ุจูุงูุงุช ุชุฌุฑูุจูุฉ:

```sql
INSERT INTO course_points (name, description) VALUES
    ('ุชูุฑูู ุงูุถุบุท', '3 ูุฌููุนุงุช ร 15 ุนุฏุฉ'),
    ('ุชูุฑูู ุงูุนููุฉ', '3 ูุฌููุนุงุช ร 10 ุนุฏุงุช');

INSERT INTO diet_items (name, description) VALUES
    ('ุจุฑูุชูู ูุณุญูู', '30 ุฌุฑุงู ุจุนุฏ ุงูุชูุฑูู'),
    ('ุตุฏุฑ ุฏุฌุงุฌ ูุดูู', '200 ุฌุฑุงู ูุน ุงูุบุฏุงุก');
```

---

## ๐ฏ **ุงููุชูุฌุฉ ุงููุทููุจุฉ:**

ุจุนุฏ ุชุทุจูู ุงูุญูุ ุนูุฏ ุนุฑุถ ุชูุงุตูู ุงููุดุชุฑู ูุฌุจ ุฃู ุชุธูุฑ:

### **ุจุฑุงูุฌ ุงูุชูุฑูู:**

```
๐๏ธ ุจุฑูุงูุฌ ุชูููุฉ ุงูุนุถูุงุช                    [ูุดุท]

1๏ธโฃ ุชูุฑูู ุงูุถุบุท
   ๐ ุงูุชูุงุตูู: 3 ูุฌููุนุงุช ร 15 ุนุฏุฉ

2๏ธโฃ ุชูุฑูู ุงูุนููุฉ
   ๐ ุงูุชูุงุตูู: 3 ูุฌููุนุงุช ร 10 ุนุฏุงุช
```

### **ุงูุฃูุธูุฉ ุงูุบุฐุงุฆูุฉ:**

```
๐ ูุธุงู ุฒูุงุฏุฉ ุงููุชูุฉ ุงูุนุถููุฉ              [ูุดุท]

1๏ธโฃ ุจุฑูุชูู ูุณุญูู
   ๐ฝ๏ธ ุงูุฅุฑุดุงุฏุงุช: 30 ุฌุฑุงู ุจุนุฏ ุงูุชูุฑูู

2๏ธโฃ ุตุฏุฑ ุฏุฌุงุฌ ูุดูู
   ๐ฝ๏ธ ุงูุฅุฑุดุงุฏุงุช: 200 ุฌุฑุงู ูุน ุงูุบุฏุงุก
```

---

## ๐จ **ูู ุญุงูุฉ ุงุณุชูุฑุงุฑ ุงููุดููุฉ:**

### **ุชุญูู ูู ุชุณูุณู ุงูุนูููุงุช:**

1. **ุฅูุดุงุก ุงููุดุชุฑู:** โ
2. **ุฅูุดุงุก ูุฌููุนุฉ ุงูุชูุงุฑูู:** โ
3. **ุฅุถุงูุฉ ุงูุชูุงุฑูู ูููุฌููุนุฉ:** โ
4. **ุฅูุดุงุก ูุฌููุนุฉ ุงููุธุงู ุงูุบุฐุงุฆู:** โ
5. **ุฅุถุงูุฉ ุงูุนูุงุตุฑ ูููุฌููุนุฉ:** โ

### **ูุญุต ุงูุจูุงูุงุช ูุฏููุงู:**

```sql
-- ูุญุต ูุดุชุฑู ูุนูู
SELECT * FROM subscribers WHERE name = 'ุงุณู ุงููุดุชุฑู';

-- ูุญุต ูุฌููุนุงุชู
SELECT * FROM groups WHERE subscriber_id = 'SUBSCRIBER_ID_HERE';

-- ูุญุต ุนูุงุตุฑ ุงููุฌููุนุงุช
SELECT gi.*, cp.name as course_name, di.name as diet_name
FROM group_items gi
LEFT JOIN course_points cp ON gi.item_id = cp.id
LEFT JOIN diet_items di ON gi.item_id = di.id
WHERE gi.group_id IN (
    SELECT id FROM groups WHERE subscriber_id = 'SUBSCRIBER_ID_HERE'
);
```

---

## โ **ุชุฃููุฏ ุงููุฌุงุญ:**

ุจุนุฏ ุชุทุจูู ุงูุญู:

- โ **ุฌุฏุงูู ุงููุฌููุนุงุช ููุฌูุฏุฉ** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ **ุงุฎุชุจุงุฑ ุงููุธุงู ูุงุฌุญ** ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
- โ **ุงูุจุฑุงูุฌ ุชูุญูุธ ุจุดูู ุตุญูุญ** ุนูุฏ ุฅุถุงูุฉ ูุดุชุฑู
- โ **ุงูุจุฑุงูุฌ ุชุธูุฑ ุจุดูู ุฌููู** ูู ุตูุญุฉ ุงูุชูุงุตูู
- โ **Console logs ูุงุถุญุฉ** ุชุคูุฏ ูุฌุงุญ ุงูุนูููุงุช

**๐ ุงููุดููุฉ ูุญูููุฉ ูุงููุธุงู ูุนูู ุจุดูู ูุซุงูู!**
